<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>FORM KEHADIRAN</title>
  <link rel="icon" href="src/images/logo_disdukcapil_jbr.png" type="image/gif">
  <link rel="shortcut icon" href="src/images/logo_disdukcapil_jbr.png">
  <link rel="stylesheet" href="https://dpmptsp.jabarprov.go.id/kehadiran/assets/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://dpmptsp.jabarprov.go.id/kehadiran/assets/css/fontawsom-all.min.css">
  <link rel="stylesheet" href="path/to/font-awesome/css/font-awesome.min.css">
  <link rel="stylesheet" type="text/css" href="https://dpmptsp.jabarprov.go.id/kehadiran/assets/css/style.css" />
  <link type="text/css" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/south-street/jquery-ui.css" rel="stylesheet">
  <link type="text/css" href="https://dpmptsp.jabarprov.go.id/kehadiran/assets/css/jquery.signature.css" rel="stylesheet"> 
  <style>
    .kbw-signature { width: 100%; height: 200px; }
    #sig canvas{
      width: 100% !important;
      height: auto;
    }
  </style>
</head>

<body>
  <div class="container-fluid ">
    <div class="container ">
      <div class="row cdvfdfd">
        <div class="col-lg col-md-12 login-box">
          <div class="row">
            <div class="col-lg-8 col-md-6 log-det">
              <div class="small-logo">
                <!-- <i class="fab fa-asymmetrik"> -->
                </i><img src="src/images/logo_disdukcapil_jbr.png"><p>FORM KEHADIRAN</p>
              </div>
              <!-- <p class="dfmn">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed pharetra ut dui in dictum. </p> -->
              <form id="attendanceForm" class="splash-container" action="https://script.google.com/macros/s/AKfycbzLyiXBI8MBHDx256TciiAG2D2hId1V9wLcbeskNCSfnU9cHrg31gkiByTovrX-ldyo/exec" method="POST">
                <div class="text-box-cont">
                  <div class="row form">
                    <div class="col-lg-12">
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1"><i class="fa fa-book" aria-hidden="true"></i></span>
                        </div>
                        <input type="hidden" name="idkegiatan" value="2795">
                        <input type="text" class="form-control" name="kegiatan" placeholder="Kegiatan" value="" aria-describedby="basic-addon1" readonly>
                      </div>
                  
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1"><i class="fa fa-user-o" aria-hidden="true"></i></span>
                        </div>
                        <input type="text" class="form-control" name="nama" placeholder="Nama Lengkap" required aria-label="Nama Lengkap" aria-describedby="basic-addon1">
                      </div>
                  
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          &nbsp;
                        </div>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="gender" id="flexRadioDefault1" value="0" checked required>
                          <label class="form-check-label" for="flexRadioDefault1">Pria</label>
                        </div>
                        <label class="form-check-label">&nbsp;</label>
                        <div class="form-check">
                          <input class="form-check-input" type="radio" name="gender" id="flexRadioDefault2" value="1">
                          <label class="form-check-label" for="flexRadioDefault2">Wanita</label>
                        </div>
                      </div>
                  
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1"><i class="fa fa-address-book-o" aria-hidden="true"></i></span>
                        </div>
                        <input type="text" class="form-control" name="instansi" placeholder="Instansi" required aria-label="Instansi" aria-describedby="basic-addon1">
                      </div>
                  
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1"><i class="fa fa-graduation-cap" aria-hidden="true"></i></span>
                        </div>
                        <input type="text" class="form-control" name="jabatan" placeholder="Jabatan" required aria-label="Jabatan" aria-describedby="basic-addon1">
                      </div>
                  
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1"><i class="fa fa-envelope" aria-hidden="true"></i></span>
                        </div>
                        <input type="email" class="form-control" name="email" required placeholder="E-mail" aria-label="Email" aria-describedby="basic-addon1">
                      </div>
                      
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1"><i class="fa fa-phone-square" aria-hidden="true"></i></span>
                        </div>
                        <input type="number" class="form-control" name="telepon" required placeholder="Handphone" aria-label="Handphone" aria-describedby="basic-addon1">
                      </div>
                  
                      <div class="input-group mb-3">
                        <div class="input-group-prepend">
                          <span class="input-group-text" id="basic-addon1"><i class="fa fa-map-marker" aria-hidden="true"></i></span>
                        </div>
                        <input type="text" class="form-control" name="namkab" required placeholder="Asal Tamu" aria-label="Asal Tamu" aria-describedby="basic-addon1">
                      </div>
                  
                      <center>
                        <div class="col-xs-4 col-xs-offset-4">
                          <p>Tanda Tangan</p>
                          <center><div id="sig" style="clear: both;"></div></center>
                          <p style="clear: both;">
                            <button id="clear" class="btn btn-secondary" type="button">Bersihkan</button>
                            <textarea id="signature64" name="signed" style="display: none"></textarea>
                          </p>
                        </div>
                      </center>
                    </div>
                  </div>
                  
                  <div class="input-group center">
                    <button class="btn btn-primary btn-round" type="submit" value="Save">SIMPAN</button>
                  </div>
                        
                  <div class="row">
                    <p class="small-info">Kunjungi Kami</p>
                  </div>
                  
                  <div class="row medsos">
                    <ul>
                      <a href="https://www.youtube.com/@bidangpiakpd-disdukcapilpr1776"><i class="fab fa-youtube"></i></a>
                      <a href="https://www.instagram.com/dukcapiljabar/"><i class="fab fa-instagram"></i></a>
                      <a href="https://www.facebook.com/dukcapiljabar/"><i class="fab fa-facebook-f"></i></a>
                    </ul>
                  </div>   
                </div>
              </form>              
            </div>
            <div class="col-lg-4 col-md-6 box-de">
              <div class="inn-cover">
                <div class="foter-credit">
                  <a href="https://disdukcapil.jabarprov.go.id/" target="_blank">&copy; Disdukcapil JABAR</a>  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Include your scripts here -->
  <script src="https://dpmptsp.jabarprov.go.id/kehadiran/assets/js/jquery-3.2.1.min.js"></script>
  <script src="https://dpmptsp.jabarprov.go.id/kehadiran/assets/js/popper.min.js"></script>
  <script src="https://dpmptsp.jabarprov.go.id/kehadiran/assets/js/bootstrap.min.js"></script>
  <script src="https://dpmptsp.jabarprov.go.id/kehadiran/assets/js/script.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
  <script type="text/javascript" src="https://dpmptsp.jabarprov.go.id/kehadiran/assets/js/jquery.ui.touch-punch.min.js"></script>
  <script type="text/javascript" src="https://dpmptsp.jabarprov.go.id/kehadiran/assets/js/jquery.signature.js"></script>
  <script>
  $(function() {
    var sig = $('#sig').signature({syncField: '#signature64', syncFormat: 'PNG'});
    $('#clear').click(function(e) {
      e.preventDefault();
      sig.signature('clear');
      $("#signature64").val('');
    });
  });

  $('#attendanceForm').submit(function(event) {
    event.preventDefault();
    var formData = new FormData(this);

    fetch('https://script.google.com/macros/s/AKfycbzLyiXBI8MBHDx256TciiAG2D2hId1V9wLcbeskNCSfnU9cHrg31gkiByTovrX-ldyo/exec', {
      method: 'POST',
      body: formData
    })
    .then(response => response.text())
    .then(result => {
      console.log(result);  // Tambahkan ini untuk debugging
      if (result.includes('Success')) {
        window.location.href = 'index.html';  // Ganti dengan URL halaman utama
      } else {
        alert('There was an error submitting the form: ' + result);
      }
    })
    .catch(error => {
      console.error('Error:', error);
      alert('There was an error submitting the form.');
    });
  });

</script>
</body>
</html>
